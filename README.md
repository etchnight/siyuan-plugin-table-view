# 表格展示

[English](./README_en_US.md)

思源笔记插件，仿 Remnote 的 Table View 功能，利用标签，在表格中展示笔记数据

- 每行表示某个`概念`的所有`属性`
- 支持标题、列表、超级块等形式组织的笔记

> ❗ 表格展示不是数据库，表格所展示的数据直接来源于你的笔记，并且禁止在表格中编辑内容

## 使用方法

1. 利用标签标记块：
   - 在`概念`所在块上使用`类别`标签，如在`三国演义`的标题上使用`书籍`标签
   - 在`概念`的`后代块`中，使用子标签标记`属性`块如在`罗贯中`所在块使用`书籍/作者`标签，并且`罗贯中`所在块应在`三国演义`的子块中（不限层级）
2. 在顶栏中点击`表格展示`,打开新页签
3. 在输入框输入刚才标记的标签，如`书籍`，注意，直接输入不会触发任何动作，需要在弹出的自动补全列表中点击`书籍`标签
4. 等待一会，会发现下面的表格出现如下内容：
   |名称|作者|
   |---|---|
   |三国演义|罗贯中|

## 工作流程

了解该插件的工作流程可能对取得预期的效果有所帮助

1. 初始化时插件会拉取所有标签，之后只要不关闭窗口，这些标签将会被复用
2. 选择某个标签后（标签 1），插件会进行如下操作：
   1. 查找所有子标签，即以`标签1`开头的标签，将它们作为表头
   2. 查找含有`标签1`的所有块，将它们的`content`填入`名称`列
   3. 查找上一步找到块的所有后代块
      - 如果是段落块，将查找其父块的所有后代块，这意味着，如果段落块位于超级块、列表项块、引述块中，将查找超级块、列表项块、引述块的所有后代块
   4. 在后代块的内容中查找子标签
      - 使用距离含有`标签1`的块层级最近的块（这意味着，优先使用超级块、列表项块、引述块，而不是其它们的子段落块）
   5. 将上一步找到的块放入相应单元格
3. 除`名称`列单元格直接使用文本外，其余所有单元格都是使用思源编辑器渲染，这意味着，其所有子块都将被渲染
